<!DOCTYPE html>
<html>
<head>
    <title>MealMate - Restaurant Results</title>
</head>
<body>
    <h1>Restaurants for {{ cuisine }} cuisine:</h1>
    
    {% if restaurants %}
        <ul>
        {% for restaurant in restaurants %}
            <li>
                <strong>{{ restaurant.name }}</strong><br>
                Location: {{ restaurant.location }}<br>
                Average Price: ${{ restaurant.average_price }}<br>
                {% if restaurant.discount %}
                    Discount: {{ restaurant.discount }}% off<br>
                {% endif %}
                
                <!-- MOVE THE FAVORITES FORM INSIDE THE LOOP -->
                <form action="{% url 'add_favorite_restaurant' %}" method="post" style="display: inline; margin-top: 10px;">
                    {% csrf_token %}
                    <input type="hidden" name="restaurant_id" value="{{ restaurant.id }}">
                    <button type="submit" style="background: #dc3545; color: white; padding: 5px 10px; border: none; border-radius: 3px; cursor: pointer;">
                        ❤️ Add to Favorites
                    </button>
                </form>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No restaurants found for {{ cuisine }} cuisine.</p>
        <p>Available cuisines in our database: 
            {% with all_cuisines=Restaurant.objects.values_list|dictsort:"cuisine" %}
                {{ all_cuisines|join:", " }}
            {% endwith %}
        </p>
    {% endif %}
    
    <a href="{% url 'cuisine_selection' %}">← Choose another cuisine</a><br>
    <a href="/users/home/">← Back to main menu</a>
</body>
</html>